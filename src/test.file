@string
    = '"' !'"'* '"'
    = "'" !"'"* "'"

@word = (("a"-"z") | ("A"-"Z"))+

@optionName = "%" word
@ruleName = ("@" | ":") word

@callbackSpecifier = ">"

@equal = "="

@qualifier = ("*" | "+" | "?" | "^")

@not = "!"

@and = "&"
@or  = "|"
@to  = "-"

@brackets = ("(" | ")" | "[" | "]" | "{" | "}")

@whitespace = (" " | "\t" | "\n" | "\r")
@comment = ";" !"\n"*

:rule
    = word
    = string

    = not rule

    = '(' pattern ')'
    = '(' pattern (and pattern)* ')'
    = '(' pattern (or pattern)* ')'

:variable
    = "[" word "]"
    = "{" word "}"

:step = rule variable? qualifier?

:pattern = step*

:type = ruleName (equal pattern)*

:option = optionName equal string

:file = (option | pattern)*